[{"/Users/joshuawajnryb/Desktop/BlockchainProject2/CTS-app/src/index.js":"1","/Users/joshuawajnryb/Desktop/BlockchainProject2/CTS-app/src/reportWebVitals.js":"2","/Users/joshuawajnryb/Desktop/BlockchainProject2/CTS-app/src/App.js":"3"},{"size":534,"mtime":1683157837314,"results":"4","hashOfConfig":"5"},{"size":362,"mtime":1682679896000,"results":"6","hashOfConfig":"5"},{"size":7809,"mtime":1683311665715,"results":"7","hashOfConfig":"5"},{"filePath":"8","messages":"9","suppressedMessages":"10","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},"qj773x",{"filePath":"11","messages":"12","suppressedMessages":"13","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"14","messages":"15","suppressedMessages":"16","errorCount":0,"fatalErrorCount":0,"warningCount":6,"fixableErrorCount":0,"fixableWarningCount":0,"source":"17"},"/Users/joshuawajnryb/Desktop/BlockchainProject2/CTS-app/src/index.js",[],[],"/Users/joshuawajnryb/Desktop/BlockchainProject2/CTS-app/src/reportWebVitals.js",[],[],"/Users/joshuawajnryb/Desktop/BlockchainProject2/CTS-app/src/App.js",["18","19","20","21","22","23"],[],"import React, { useState, useEffect } from \"react\";\nimport Web3 from \"web3\";\nimport HelpDesk from \"./ITHelpdesk.json\";\nimport \"./App.css\";\n\nfunction App() {\n\n  const [title, setTitle] = useState(\"\");\n  const [issue, setIssue] = useState(\"\");\n  const [ticketCount, setTicketCount] = useState(0);\n  const [resolvedTickets, setResolvedTickets] = useState([]);\n  const [description, setDescription] = useState(\"\");\n  const [difficulty, setDifficulty] = useState(\"low\");\n  const [deviceType, setDeviceType] = useState(\"phone\");\n  const [TicketDetails, setTicketDetails] = useState(null);\n  const [ticketId, setTicketId] = useState(\"\");\n\n  const [web3, setWeb3] = useState(null);\n  const [contract, setContract] = useState(null);\n  const [account, setAccount] = useState(null);\n\n  const createTicket = async () => {\n  const value = web3.utils.toWei(\"0.01\", \"ether\"); // adjust the ticket value as needed\n  let diff = 0;\n  let dev = 0;\n\n  if (difficulty === \"Easy\") {\n    diff = 0;\n  } else if (difficulty === \"Medium\") {\n    diff = 1;\n  } else if (difficulty === \"Hard\") {\n    diff = 2;\n  }\n\n  if (deviceType === \"Laptop\") {\n    diff = 0;\n  } else if (deviceType === \"Desktop\") {\n    diff = 1;\n  } else if (deviceType === \"Mobile\") {\n    diff = 2;\n  }\n\n  try {\n    const tx = await contract.methods.createTicket(\n      title,\n      issue,\n      description,\n      diff,\n      dev\n    ).send({\n      value,\n      from: account,\n      gas: 500000,\n    });\n    const { transactionHash } = tx;\n    window.alert(`Transaction sent: ${transactionHash}`);\n    //const { events } = tx;\n    //const { TicketCreated } = events;\n    //const { returnValues } = TicketCreated;\n    //const ticketId = returnValues.ticketId; // define ticketId here\n    //window.alert(`Ticket created with ID: ${ticketId}`);\n    setTitle(\"\");\n    setIssue(\"\");\n    setDescription(\"\");\n    setDifficulty(\"Easy\");\n    setDeviceType(\"phone\");\n    setTicketCount(ticketCount + 1);\n  } catch (err) {\n    console.error(err);\n    window.alert(\"Failed to create ticket\");\n  }\n};\n\n\n\n  const resolveTicket = async (ticketId) => {\n    try {\n      const tx = await contract.methods.resolveTicket(ticketId).send({\n        from: account,\n      });\n      const ticket = await contract.methods.tickets(ticketId).call();\n      if (ticket.resolved) {\n        const updatedResolvedTickets = [...resolvedTickets, ticket];\n        setResolvedTickets(updatedResolvedTickets);\n      }\n    } catch (err) {\n      console.error(err);\n      window.alert(\"Failed to resolve ticket\");\n    }\n  };\n\n  const ticketDetails = async (ticketId) => {\n  try {\n    const ticket = await contract.methods.tickets(ticketId).call();\n    console.log(\"Ticket Details\", ticket);\n    alert(`Title: ${ticket.title}\\nIssue: ${ticket.issue}\\nDescription: ${ticket.description}\\nDifficulty: ${ticket.difficulty}\\nDevice Type: ${ticket.deviceType}\\nCreated By: ${ticket.createdBy}\\nResolved: ${ticket.resolved}\\nResolved By: ${ticket.resolvedBy}`);\n  } catch (error) {\n    console.error(error);\n  }\n};\n\n  const TicketNotes = async () => {\n    await contract.methods.ticketNotes().send({ from: account });\n };\n\n  const connectWallet = async () => {\n    try {\n      if (window.ethereum) {\n        await window.ethereum.request({ method: \"eth_requestAccounts\" });\n        const web3 = new Web3(window.ethereum);\n        const networkId = await web3.eth.net.getId();\n        const contractAddress = HelpDesk.networks[networkId].address;\n        const contract = new web3.eth.Contract(HelpDesk.abi, contractAddress);\n        const accounts = await web3.eth.getAccounts();\n        const account = accounts[0];\n        setWeb3(web3);\n        setContract(contract);\n        setAccount(account);\n        const ticketCount = await contract.methods.ticketCount().call();\n        setTicketCount(parseInt(ticketCount));\n        const resolvedTickets = [];\n        for (let i = 0; i < ticketCount; i++) {\n          const ticket = await contract.methods.tickets(i).call();\n          if (ticket.resolved) {\n            resolvedTickets.push(ticket);\n          }\n        }\n        setResolvedTickets(resolvedTickets);\n      } else {\n        window.alert(\"Please install MetaMask to use this application\");\n      }\n    } catch (err) {\n      console.error(err);\n      window.alert(\"Failed to connect wallet\");\n    }\n  };\n\n  return (\n  <div className=\"App\">\n    <h1>Help Desk</h1>\n    <button onClick={TicketNotes}>Add Note</button>\n    <button onClick={ticketDetails}>View Details</button>\n      {ticketDetails && ( // render ticket details if ticketDetails is not null\n        <div>\n          <p>Title: {ticketDetails.title}</p>\n          <p>Issue: {ticketDetails.issue}</p>\n          <p>Description: {ticketDetails.description}</p>\n          <p>Difficulty: {ticketDetails.difficulty}</p>\n          <p>Device Type: {ticketDetails.deviceType}</p>\n        </div>\n      )}\n    {!web3 ? (\n      <button onClick={connectWallet}>Connect Wallet</button>\n    ) : (\n      <>\n        <p>Your account: {account}</p>\n        <form onSubmit={(e) => { e.preventDefault(); createTicket(title, issue, description, difficulty, deviceType); }}>\n          <label>\n            Title:\n            <input\n              type=\"text\"\n              value={title}\n              onChange={(e) => setTitle(e.target.value)}\n              required\n            />\n          </label>\n          <br />\n          <label>\n            Issue:\n            <textarea\n              value={issue}\n              onChange={(e) => setIssue(e.target.value)}\n              required\n            ></textarea>\n          </label>\n          <br />\n          <label>\n            Description:\n            <textarea\n              value={description}\n              onChange={(e) => setDescription(e.target.value)}\n              required\n            ></textarea>\n          </label>\n          <br />\n          <label>\n            Difficulty:\n            <select\n              value={difficulty}\n              onChange={(e) => setDifficulty(e.target.value)}\n              required\n            >\n              <option value=\"\">Select a difficulty</option>\n              <option value=\"Easy\">Easy</option>\n              <option value=\"Medium\">Medium</option>\n              <option value=\"Hard\">Hard</option>\n            </select>\n          </label>\n          <br />\n          <label>\n            Device Type:\n            <select\n              value={deviceType}\n              onChange={(e) => setDeviceType(e.target.value)}\n              required\n            >\n              <option value=\"\">Select a device type</option>\n              <option value=\"Desktop\">Desktop</option>\n              <option value=\"Laptop\">Laptop</option>\n              <option value=\"Mobile\">Mobile</option>\n            </select>\n          </label>\n          <br />\n          <button type=\"submit\">Create Ticket</button>\n        </form>\n        <h2>Ticket Count: {ticketCount}</h2>\n        <h2>Resolved Tickets</h2>\n        <ul>\n          {resolvedTickets.map((ticket, index) => (\n            <li key={index}>\n              <p>{ticket.title}</p>\n              <p>{ticket.issue}</p>\n              <p>{ticket.resolvedBy}</p>\n            </li>\n          ))}\n        </ul>\n        <h2>Open Tickets</h2>\n        <ul>\n          {Array.from({ length: ticketCount }, (_, i) => i).map((i) => {\n            const ticket = contract.methods.tickets(i).call();\n            if (!ticket.resolved) {\n              return (\n                <li key={i}>\n                  <p>{ticket.title}</p>\n                  <p>{ticket.issue}</p>\n                  <button onClick={() => resolveTicket(i)}>\n                    Resolve Ticket\n                  </button>\n                </li>\n              );\n            }\n            return null;\n          })}\n        </ul>\n      </>\n    )}\n  </div>\n  );\n}\n\nexport default App;\n      ",{"ruleId":"24","severity":1,"message":"25","line":1,"column":27,"nodeType":"26","messageId":"27","endLine":1,"endColumn":36},{"ruleId":"24","severity":1,"message":"28","line":15,"column":10,"nodeType":"26","messageId":"27","endLine":15,"endColumn":23},{"ruleId":"24","severity":1,"message":"29","line":15,"column":25,"nodeType":"26","messageId":"27","endLine":15,"endColumn":41},{"ruleId":"24","severity":1,"message":"30","line":16,"column":10,"nodeType":"26","messageId":"27","endLine":16,"endColumn":18},{"ruleId":"24","severity":1,"message":"31","line":16,"column":20,"nodeType":"26","messageId":"27","endLine":16,"endColumn":31},{"ruleId":"24","severity":1,"message":"32","line":78,"column":13,"nodeType":"26","messageId":"27","endLine":78,"endColumn":15},"no-unused-vars","'useEffect' is defined but never used.","Identifier","unusedVar","'TicketDetails' is assigned a value but never used.","'setTicketDetails' is assigned a value but never used.","'ticketId' is assigned a value but never used.","'setTicketId' is assigned a value but never used.","'tx' is assigned a value but never used."]